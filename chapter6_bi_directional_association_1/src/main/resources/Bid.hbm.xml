<?xml version="1.0"?>
<!-- chapter6_bidirectional_bid_to_item_mappings -->
<!DOCTYPE hibernate-mapping SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.gunjan">

    <class name="Bid" table="BID">
        <id name="id" type="long" column="BID_ID">
            <generator class="native"/>
        </id>
        <property name="price">
            <column name="AMOUNT"/>
        </property>
        <!-- here update="false" insert="false", so this will avoid the duplicate
            update of ITEM_ID foreign key -->
        <!-- <many-to-one name="item" class="Item" column="ITEM_ID" update="false"
            insert="false" not-null="true" /> -->
        <!-- cascade option offers transitive persistence and deletion, a feature you can enable
            to save lines of code and to let hibernate manage the life cycle of associated
            entity instance automatically -->
        <many-to-one name="item" class="Item" column="ITEM_ID" not-null="true" cascade="save-update"/>
    </class>
</hibernate-mapping>

<!--
    create table BID (
       BID_ID bigint generated by default as identity,
        AMOUNT integer,
        ITEM_ID integer not null,
        primary key (BID_ID)
    )
    alter table BID
       add constraint FKa4k5dsi56ha2ouqx4y8jrvvl9
       foreign key (ITEM_ID)
       references ITEM
-->