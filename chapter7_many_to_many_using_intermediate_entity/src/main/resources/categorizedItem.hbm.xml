<?xml version="1.0"?>
<!-- chapter7_many_to_many_using_intermediate_entity -->
<!DOCTYPE hibernate-mapping SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
<hibernate-mapping package="com.gunjan">
    <class name="CategorizedItem" table="CATEGORIZED_ITEM" mutable="false">
        <composite-id name="id" class="CategorizedItem$Id">
            <key-property name="categoryId" access="field" column="CATEGORY_ID"></key-property>
            <key-property name="itemId" access="field" column="ITEM_ID"></key-property>
        </composite-id>
        <property name="dateAdded" column="ADDED_ON" type="timestamp"></property>
        <property name="username" column="ADDED_BY_USER" type="string"
                  not-null="true"/>
        <many-to-one name="category" column="CATEGORY_ID"
                     not-null="true" insert="false" update="false"></many-to-one>
        <many-to-one name="item" column="ITEM_ID" not-null="true"
                     insert="false" update="false"></many-to-one>
    </class>
</hibernate-mapping>
<!--
    create table CATEGORIZED_ITEM (
        CATEGORY_ID bigint not null,
        ITEM_ID bigint not null,
        ADDED_ON timestamp,
        ADDED_BY_USER varchar(255) not null,
        primary key (CATEGORY_ID, ITEM_ID)
    )
    create table CATEGORY (
        CATEGORY_ID bigint generated by default as identity,
        NAME varchar(255),
        primary key (CATEGORY_ID)
    )
    create table ITEM (
        ITEM_ID bigint generated by default as identity,
        NAME varchar(255),
        primary key (ITEM_ID)
    )
    alter table CATEGORIZED_ITEM
        add constraint FK6akh2xp23feiibbwojb6rg8iy
        foreign key (CATEGORY_ID)
        references CATEGORY
    alter table CATEGORIZED_ITEM
        add constraint FK6n3qhtqqk6lu3k5bnje7jrdx5
        foreign key (ITEM_ID)
        references ITEM
-->